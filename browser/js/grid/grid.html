<div id="grid" class="animated fadeInRightBig">
  <div class="container">
    <div class="row">
      <div class="col-xs-6 left-column">
        <div class="row top-icons">
          <span class="glyphicon glyphicon-cd pull-left"></span>
          <span class="glyphicon glyphicon-cd pull-right"></span>
        </div>
        <div class="row header">
          <h3><span ng-class="flag(grid.map)"></span>{{ grid.name }}<span ng-class="flag(grid.map)"></span></h3>
        </div>
        <div class="row body">
          <div class="row">
            <table class="table color-picker">
              <tbody>
                <tr>
                  <td ng-repeat="color in colors">
                    <div class="color-square" ng-style="{ background: color, opacity: colorPicked(color) }" ng-click="!colorPicked(color) && changeColor(color)">
                      <span class="glyphicon glyphicon-flash" ng-hide="!!colorPicked(color)"></span>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="row">
            <section ng-repeat="player in players track by $index">
              <div class="player-container">
                <div class="row top-icons">
                  <span class="glyphicon glyphicon-cd pull-left"></span>
                  <span class="glyphicon glyphicon-cd pull-right"></span>
                </div> 
                <div class="row player-info">
                  <div class="col-xs-3">
                    <div ng-style="{ background: player.color }" class="color-square"><span class="glyphicon glyphicon-flash"></span></div>
                  </div>
                  <div class="col-xs-9">
                    <h4 ng-class="{ 'animated pulse infinite': player.user.username === me.username }">{{ player.user.username }} <span class="glyphicon glyphicon-wrench" ng-class="{ 'animated pulse infinite': player.user.username === me.username }" ng-if="$index !== 0"></span><span class="glyphicon glyphicon-tower" ng-if="$index === 0"></span></h4>
                  </div>
                </div>
                <div class="row bottom-icons">
                  <span class="glyphicon glyphicon-cd pull-left"></span>
                  <span class="glyphicon glyphicon-cd pull-right"></span>
                </div>
              </div>
            </section>
          </div>

          <div class="row cta-buttons">
            <div class="btn-group btn-group-justified" role="group">
              <div class="btn-group">
                <button type="button" class="btn btn-warning" ng-click="leaveGame()"><span class="glyphicon glyphicon-arrow-left"></span> Leave</button>
              </div>
              <div class="btn-group">
                <button type="button" class="btn btn-info" ng-click="goHome()"><span class="glyphicon glyphicon-home"></span> Home</button>
              </div>
              <div class="btn-group">
                <button type="button" class="btn btn-success" ng-click="startGame()" ng-disabled="!owner || grid.players.length < 2 || grid.randomRegions? false : numRegions[grid.players.length] - grid.regions.length !== 0">{{ owner? 'Start' : 'Waiting...' }}<span class="glyphicon glyphicon-arrow-right" ng-if="owner"></span></button>
              </div>
            </div>
          </div>
        </div>

        <div class="row bottom-icons">
          <span class="glyphicon glyphicon-cd pull-left"></span>
          <span class="glyphicon glyphicon-cd pull-right"></span>
        </div>

      </div>

      <div class="col-xs-6 right-column">
        <div class="row top-row">
          <div class="row top-icons" style="text-align: center;">
            <span class="glyphicon glyphicon-cd pull-left"></span>
            <span>REMAINING: {{ numRegions[grid.players.length] - grid.regions.length }}</span>
            <span class="glyphicon glyphicon-cd pull-right"></span>
          </div>
          <svg id="region-selector">
          <div class="row" id="icon-placeholder" ng-if="players[0].user.username !== me.username || randomRegionsSelected">
            <span class="glyphicon glyphicon-question-sign" ng-hide="players[0].user.username !== me.username"></span>
          </div>
          <div class="row bottom-icons">
            <span class="glyphicon glyphicon-cd pull-left"></span>
            <span class="glyphicon glyphicon-cd pull-right"></span>
          </div>
        </div>
        <div class="row bottom-row">
          <div class="row top-icons">
            <span class="glyphicon glyphicon-cd pull-left"></span>
            <span class="glyphicon glyphicon-cd pull-right"></span>
          </div>
          <chat key="key" me="me.username"></chat>
          <div class="row bottom-icons">
            <span class="glyphicon glyphicon-cd pull-left"></span>
            <span class="glyphicon glyphicon-cd pull-right"></span>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>